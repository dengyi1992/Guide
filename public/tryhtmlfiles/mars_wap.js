/*! mars-1.0.1 2016-03-15 02:03:14 */
!function(){if(!window.Mar){window.T0=(new Date).getTime(),window.Mar=function(){},Mar.Cookie={get:function(a){var b,c=document.cookie,d=c.indexOf(a+"=");return-1!==d?(d+=a.length+1,b=c.indexOf(";",d),unescape(c.substring(d,-1===b?c.length:b))):void 0},set:function(a,b,c){var d,e=document.domain.toLowerCase();d=-1!==e.indexOf("vipshop.com")?"vipshop.com":-1!==e.indexOf("appvipshop.com")?"appvipshop.com":-1!==e.indexOf("vipglobal.hk")?"vipglobal.hk":"vip.com",0===c?document.cookie=a+"="+escape(b)+";path=/;domain=."+d:(date=new Date,date.setTime(date.getTime()+24*c*3600*1e3),document.cookie=a+"="+escape(b)+";expires="+date.toGMTString()+";path=/;domain=."+d)},del:function(a,b){document.cookie=a+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path=/;"+(b?"domain="+b:"")}},Mar.guid=function(){for(var a=0,b=[];8>a;)b.push((65536*(1+Math.random())|0).toString(16).substring(1)),a++;return b.join("").toUpperCase()},Mar.guid2=function(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},Mar.guid3=function(){function a(a,c,d){var e=b(a,16),f=new Array,g="",h=0;for(h=0;h<e.length;h++)f.push(e.substring(h,h+1));for(h=Math.floor(c/4);h<=Math.floor(d/4);h++)g+=f[h]&&""!=f[h]?f[h]:"0";return g}function b(a,b){return a.toString(b)}function c(a){return Math.floor(Math.random()*(a+1))}var d=new Date(1582,10,15,0,0,0,0),e=new Date,f=e.getTime()-d.getTime(),g=a(f,0,31),h=a(f,32,47),i=a(f,48,59)+"1",j=a(c(4095),0,7),k=a(c(4095),0,7),l=a(c(8191),0,7)+a(c(8191),8,15)+a(c(8191),0,7)+a(c(8191),8,15)+a(c(8191),0,15);return g+h+i+j+k+l},Mar.rand=function(a){var b="0123456789abcdef",c="",d=0;for(a=a||32;a>d;d++)c+=b.charAt(Math.ceil(1e8*Math.random())%b.length);return c},Mar.IE=function(){for(var a=3,b=document.createElement("DIV"),c=b.getElementsByTagName("I");b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",c[0];);return a>4?a:0},Mar.browser=function(){var a=navigator.userAgent.toLowerCase(),b=Mar.IE();return{ie:b&&["ie",b],firefox:a.match(/firefox\/([\d.]+)/),chrome:a.match(/chrome\/([\d.]+)/),opera:a.match(/opera.([\d.]+)/),safari:window.openDatabase?a.match(/version\/([\d.]+)/):void 0}},Mar.DOMReady=function(a){document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),a()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),a())})},Mar.protocal=function(){return-1!==document.location.href.toLowerCase().indexOf("https://")?"https://":"http://"},Mar.stringify=function(a){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(a);var b,c,d,e=[],f=typeof a,g=0;if("string"===f)return'"'+a+'"';if("undefined"===f||"boolean"===f||"number"===f||null===a)return a;if("[object Array]"==Object.prototype.toString.call(a)){for(b=a.length,e.push("[");b>g;g++)e.push(Mar.stringify(a[g])+",");e.push("]")}else{e.push("{");for(c in a)a.hasOwnProperty(c)&&e.push('"'+c+'":'+Mar.stringify(a[c])+",");d=e.length-1,e[d]=e[d].replace(/,$/,""),e.push("}")}return e.join("")};var a;Mar.Base={},a=Mar.Base,a.local=document.location,a.domain=document.domain,a.docEle=document.documentElement,a.context="css1compat"===document.compatMode.toLowerCase()?document.body:a.docEle,a.monitor=window.screen,a.href=a.local.href,a.url=escape(a.href),a.pn=a.local.pathname.toLowerCase(),a.hn=a.local.hostname.toLowerCase(),a.ref=escape(document.referrer),a.cw=a.docEle.clientWidth,a.ch=a.docEle.clientHeight,a.res=a.monitor.width+"*"+a.monitor.height,a.col=a.monitor.colorDepth,a.w=a.context.width,a.h=a.context.height,a.nav=escape(navigator.userAgent.toLowerCase()),a.ce=navigator.cookieEnabled?1:0,a.title=escape(document.title)}}(),function(){window.localStorage&&(Mar.Storage={set:function(a,b,c){var d=[];if(c){var e=(new Date).getTime();d.push({expires:e+1e3*c})}d.push(b),localStorage.setItem(a,Mar.stringify(d))},get:function(a){var b=localStorage.getItem(a);if(null==b||void 0==b)return b="";try{b=JSON.parse(b)}catch(c){}if("object"!=typeof b)return b;if("string"==$.type(b[0]))return b[0];if("object"==$.type(b))return b;var d=b[0]&&b[0].expires;if(d&&/^\d{13,}$/.test(d)){var e=(new Date).getTime();if(e>=d)return localStorage.removeItem(a),"";b.shift()}return b[0]},remove:function(a){localStorage.removeItem(a)}}),Mar.UrlHandler=function(a){function b(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))}var c="mars_",d=["width","height","area_id","net","vipruid","app_name","source","warehouse","app_version","client","mars_cid","mobile_platform","mobile_channel","idfv","protocol_version"];if(window.localStorage)for(var e=0,f=d.length;f>e;e++){var g=d[e],h=b(g);if(""==h){if(h=Mar.Storage.get(c+g),""!=h){var i=-1==a.indexOf("?")?"?":"&";a=a+i+g+"="+h}}else Mar.Storage.set(c+g,h,3600)}return a},Mar.Request=function(a,b){var c,d=Mar.Base,e=Mar.Biz(),f=document.domain.toLowerCase();c=-1!==f.indexOf("vipshop.com")?"vipshop.com":-1!==f.indexOf("appvipshop.com")?"appvipshop.com":-1!==f.indexOf("vipglobal.hk")?"vipglobal.hk":"vip.com",a=Mar.protocal()+"mar."+c+a+"&mars_cid="+e.cid+"&mars_sid="+e.sid+"&pi="+e.pid+"&mars_vid="+e.vid+"&mars_var="+e.mvar+"&lg="+e.isLog+"&wh="+e.wh+"&in="+e.newbie+"&sn="+e.orderId+"&url="+Mar.UrlHandler(d.url)+"&sr="+d.res+"&rf="+d.ref+"&bw="+d.cw+"&bh="+d.ch+"&sc="+d.col+"&bv="+d.nav+"&ce="+d.ce+"&vs=&title="+d.title+"&tab_page_id="+e.pageId+"&vip_qe="+e.vip_qe+"&vip_qt="+e.vip_qt+"&vip_xe="+e.vip_xe+"&vip_xt="+e.vip_xt,b&&(a+="&wap_ln="+e.wapln+"&wap_vs="+e.wapvs+"&wap_pwh="+e.wappwh+"&wap_wh="+e.wapwh+"&wap_id="+e.wapid+"&wap_from="+e.wapfrom+"&cps_u="+e.cpsu+"&m_vipruid="+e.ruid),a+="&r="+Math.random();var g=new Image(1,1);return g.onload=g.onerror=g.onabort=function(){g.onload=g.onerror=g.onabort=null,g=null},g.src=a,Mar},Mar.PageIdIndex=0,Mar.PageId=Mar.PageId?Mar.PageId+"_"+ ++Mar.PageIdIndex:(new Date).getTime()+"_"+Mar.guid3(),Mar.Biz=function(){var a=Mar.Cookie,b=a.get,c=a.set,d=a.del,e=0,f=0,g=b("mars_cid")||b("cookie_id"),h=b("mars_pid")||b("page_id"),i=b("mars_sid")||Mar.rand(),j=b("visit_id")||Mar.guid(),k=window.mars_var?Mar.stringify(window.mars_var):"-",l=b("WAP[p_wh]"),m=b("WAP[auth]")||b("login_username"),n=b("WAP[revision]"),o=b("WAP[p_wh]"),p=b("warehouse"),q=b("WAP_ID"),r=b("WAP[from]"),s=b("cps_u"),t=b("m_vipruid");return m&&(e=1),(!g||32!==(g+"").length&&46!==(g+"").length)&&(g=(new Date).getTime()+"_"+Mar.rand(),f=1),h=h||0,h++,d("cookie_id"),d("page_id"),c("mars_pid",h,732),c("mars_cid",g,732),c("mars_sid",i,0),c("visit_id",j,.5/24),{cid:g,pid:h,sid:i,vid:j,wh:l,mvar:k,wapln:m,wapvs:n,wappwh:o,wapwh:p,wapid:q,wapfrom:r,cpsu:s,ruid:t,newbie:f,isLog:e,pageId:Mar.PageId}},Mar.PV=function(){var a=Mar.Cookie.get;return Mar.Request("/w?br_pos="+a("m_br_pos")+"&pr_pos="+a("m_pr_pos"),!0),Mar}}(),function(){Mar.Seed=function(){function a(a){return/.*\.\w*$/.test(a)&&-1!==$.inArray(a.match(/\.(\w*)$/i)[1],["rar","zip","exe","doc","ppt","xls","docx","xlsx","pptx","sisx","apk"])?"download":""}function b(b){var d,e,f,g=$(this),h=this.tagName.toLowerCase();"a"===h?(d=g.attr("href"),f=c[h+(d?a(d.toLowerCase()):"")]):(d=g.attr("type"),e=c[h+(d?d.toLowerCase():"")],f=e?e:h),Mar.Seed.request(f,"click",g.attr("mars_sead"),g.attr("data_mars"))}var c={inputbutton:"button",inputsubmit:"button",inputtext:"inputText",inputinput:"inputText",inputradio:"radio",inputcheckbox:"checkbox",adownload:"download",a:"link",span:"span",button:"button"};return $("body").delegate("[mars_sead]:not(select)","click",function(a){b.call(this,a)}).delegate("select[mars_sead]","change",function(){Mar.Seed.request("select","change",$(this).attr("mars_sead"))}),Mar},Mar.Seed.request=function(a,b,c,d){var e=(new Date).getTime()-window.T0;Mar.Request("/b?at="+e+"&et="+a+"&ed="+b+"&one="+encodeURIComponent(c)+"&data_mars="+(d||""),!0)}}(),function(){Mar.IndexPosition=function(){return $("body").delegate("[mars_br_pos]","click",function(){var a=$(this),b=a.attr("mars_br_pos"),c=b.match(/\_\d*\_/)[0],d=Mar.Cookie.get("m_br_pos"),e=new RegExp("\\w*"+c+"\\d*");d?-1!==d.indexOf(c)?d=d.replace(d.match(e),"").replace(/^\,|\,$/g,"").replace(/\,\,/g,",")+","+b:d+=","+b:d=b,d.split(",").length>20&&(d=d.substring(d.indexOf(",")+1,d.length)),Mar.Cookie.set("m_br_pos",d.replace(/^,/,""),1)}),$("body").delegate("[mars_pr_pos]","click",function(){var a=$(this),b=a.attr("mars_pr_pos"),c=b.match(/\_\d*\_/)[0],d=Mar.Cookie.get("m_pr_pos"),e=new RegExp("\\w*"+c+"\\d*");d?-1!==d.indexOf(c)?d=d.replace(d.match(e),"").replace(/^\,|\,$/g,"").replace(/\,\,/g,",")+","+b:d+=","+b:d=b,d.split(",").length>20&&(d=d.substring(d.indexOf(",")+1,d.length)),Mar.Cookie.set("m_pr_pos",d.replace(/^,/,""),1)}),Mar}}(),function(){Mar.Exposure=function(){var a,b=0,c=0,d=0,e=!1,f=!1,g={},h=[],i=[],j=[],k=[],l=[],m=0,n=function(a,b,c){g.string&&""!=g.string&&"{}"!=g.string&&Mar.Seed.request("link","scroll",g.sead,g.string.match(",}$")?g.string=g.string.substring(0,g.string.length-2)+"}":g.string),g.advertString&&""!=g.advertString&&Mar.Seed.request("link","scroll",g.advertSead,g.advertString),g.operateString&&""!=g.operateString&&Mar.Seed.request("link","scroll",g.operateSead,g.operateString),h=[],i=[],j=[],k=[],l=[],g.string="",g.advertString="",g.operateString="",!h.length&&q()},o=function(){f&&clearTimeout(f),f=setTimeout(function(){switch(a=Mar.getScroll(),b=$(window).height(),c=a+b,d=(new Date).getTime(),$("[mars_exposure_sead],[data-mars_exposure_sead]").each(function(b,f){var n,o=$(this).offset().top+$(this).height()/2,r=$(this);if(o>a&&c>=o){switch(n=r.attr("mars_exposure_module")?r.attr("mars_exposure_module").split("|"):r.attr("data-mars_exposure_module")&&r.attr("data-mars_exposure_module").split("|"),m=r.attr("data_mars"),m?(m=JSON.parse(m),m=m.special_id):m="",g.channel=n?n[0]:"",n[1]){case"operates":g.operateSead=r.attr("mars_exposure_sead")||r.attr("data-mars_exposure_sead");break;case"adverts":g.advertSead=r.attr("mars_exposure_sead")||r.attr("data-mars_exposure_sead");break;default:g.sead=r.attr("mars_exposure_sead")||r.attr("data-mars_exposure_sead")}switch(g.channel){case"wap":switch(n[1]){case"brands":h.push('{"page":"'+(n[2]?encodeURIComponent(n[2]):"")+'","channel_id":"'+(n[3]?n[3]:"")+'","module":"'+(n[4]?encodeURIComponent(n[4]):"")+'","tsift":"'+(n[5]?n[5]:"")+'","brand_id":"'+(n[6]?n[6]:"")+'","brand_rank":"'+(b+1)+'","expose_time":"'+d+'"}');break;case"specials":i.push('{"page":"'+(n[2]?encodeURIComponent(n[2]):"")+'","channel_id":"'+(n[3]?n[3]:"")+'","module":"'+(n[4]?encodeURIComponent(n[4]):"")+'","tsift":"'+(n[5]?n[5]:"")+'","special_id":"'+(n[6]?n[6]:"")+'","special_rank":"'+(b+1)+'","expose_time":"'+d+'"}');break;case"products":j.push('{"goods_id":"'+(n[2]?n[2]:"")+'","goods_rank":"'+(b+1)+'","expose_time":"'+d+'"}');break;case"operates":k.push('{"page":"'+(n[2]?encodeURIComponent(n[2]):"")+'","channel_id":"'+(n[3]?n[3]:"")+'","module":"'+(n[4]?encodeURIComponent(n[4]):"")+'","tsift":"'+(n[5]?n[5]:"")+'","opz_unid":"'+(n[6]?n[6]:"")+'","opz_rank":"'+(b+1)+'","expose_time":"'+d+'"}');break;case"adverts":r.hasClass("active")&&l.push('{"page":"'+(n[2]?encodeURIComponent(n[2]):"")+'","channel_id":"'+(n[3]?n[3]:"")+'","module":"'+(n[4]?encodeURIComponent(n[4]):"")+'","tsift":"'+(n[5]?n[5]:"")+'","ad_unid":"'+(n[6]?n[6]:"")+'","ad_rank":"'+(b+1)+'","expose_time":"'+d+'"}');break;default:return}break;case"mst":switch(n[1]){case"brands":h.push('{"brand_id":"'+(n[2]?n[2]:"")+'","brand_rank":"'+(n[3]?n[3]:"")+'","brandtyp":"'+(n[4]?n[4]:"")+'","expose_time":"'+d+'"}');break;case"products":j.push('{"brand_id":"'+(n[2]?n[2]:"")+'","goods_rank":"'+(n[3]?n[3]:"")+'","brandtyp":"'+(n[4]?n[4]:"")+'","goods_id":"'+(n[5]?n[5]:"")+'","expose_time":"'+d+'"}');break;default:return}break;default:return}e&&q(),p()}}),g.channel){case"wap":l.length?g.advertString='{"wap_adv_expose": ['+l.toString()+"]}":g.advertString="",k.length?g.operateString='{"wap_oper_expose": ['+k.toString()+"]}":g.operateString="",g.string="{"+(h.length?'"brands": ['+h.toString()+"],":"")+(i.length?'"specials": ['+i.toString()+"],":"")+(j.length?'"page":"'+encodeURIComponent(document.title)+'","brand_id":"'+(document.location.href.toLowerCase().match(/brand-/)?document.location.href.toLowerCase().match(/brand-(\d*)-/)[1]:"")+'","products": ['+j.toString()+"],":"")+"}";break;case"mst":g.string='{"page":"'+encodeURIComponent(document.title)+'","wap_id":"'+(window.config.data.id?"mst_"+window.config.data.id:"")+'","special_id":"'+(m?m:"")+'",'+(h.length?'"brands": ['+h.toString()+"],":"")+(j.length?'"products": ['+j.toString()+"],":"")+"}";break;default:return}},300)},p=function(){e=setInterval(n,2e3)},q=function(){clearInterval(e)},r=function(){window.onscroll=function(a){o()},setTimeout(o,300),p()};$(r)},Mar.getScroll=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body?document.body.scrollTop:void 0}}(),Mar.Performance=function(){var a,b,c,d,e=window.performance;return e&&(a=e.timing,b=e.navigation,Mar.DOMReady(function(){d=setInterval(function(){0!==a.loadEventEnd&&(clearInterval(d),c={navigation:a.loadEventEnd-a.navigationStart,unloadEvent:a.unloadEventEnd-a.unloadEventStart,redirect:a.redirectEnd-a.redirectStart,domainLookup:a.domainLookupEnd-a.domainLookupStart,connect:a.connectEnd-a.connectStart,request:a.responseEnd-a.requestStart,response:a.responseEnd-a.responseStart,domLoading:a.domInteractive-a.domLoading,domInteractive:a.domContentLoadedEventEnd-a.domInteractive,domContentLoaded:a.domContentLoadedEventEnd-a.domContentLoadedEventStart,domComplete:a.domComplete-a.domLoading,loadEvent:a.loadEventEnd-a.loadEventStart,fetch:a.responseEnd-a.fetchStart,type:b.type},Mar.Request("/a?ps_nav="+c.navigation+"&ps_ule="+c.unloadEvent+"&ps_rd="+c.redirect+"&ps_dlu="+c.domainLookup+"&ps_con="+c.connect+"&ps_req="+c.request+"&ps_resp="+c.response+"&ps_dl="+c.domLoading+"&ps_di="+c.domInteractive+"&ps_dcl="+c.domContentLoaded+"&ps_dc="+c.domComplete+"&ps_le="+c.loadEvent+"&ps_ft="+c.fetch+"&ps_ty="+c.type))},100)})),Mar},function(){Mar.PV().Seed().IndexPosition().Exposure()}();